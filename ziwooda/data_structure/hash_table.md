# 해시 테이블(Hash Table)

> _연관 배열 추상 자료형(ADT)을 구현하는 자료구조로, Key-Value 형식으로 데이터 저장_

- 특정값을 검색할 때 데이터 **고유의 인덱스**로 접근하기 때문에 평균 시간복잡도는 O(1)
- 내부적으로 **배열을 사용하여 데이터를 저장**하기 때문에 데이터 양에 관계 없이 빠른 성능을 기대할 수 있음

## 해시

> _임의 크기 데이터를 고정 크기 값으로 매핑하는 데 사용할 수 있는 함수 (해시 테이블의 핵심!)_

```
ABC → A1
1324BC → CB
AF32B → D5
```

위의 화살표(→) 역할을 하는 함수가 바로 해시 함수!

### 해싱(Hashing)

> _해시 테이블을 인덱싱하기 위해 해시 함수를 사용하는 것을 의미_

- 정보를 가능한 한 빠르게 저장하고 검색하기 위한 중요 기법 중 하나
- **충돌을 최소화**하는 것이 중요!
  - 생일 문제
  - 비둘기집 원리
  - 로드 팩터
  - 해시 함수‼️

#### ⍢ 생일 문제

실제로 365명 이상이 모이지 않아도 비둘기집 원리에 따라 생일이 같은 사람이 2명 이상 존재할 수 있음

#### ⍢ 비둘기집 원리

> _해시 충돌이 발생하는 근본적인 원인!_

n개의 아이템을 m개의 컨테이너에 넣을 때, n>m이면 적어도 하나의 컨테이너에는 반드시 2개 이상의 아이템이 들어있다는 원리

#### ⍢ 로드 팩터(Load Factor)

> _해시 테이블이 저장된 데이터 개수 n을, 버킷의 개수 k로 나눈 것 (`n/k`)_

- 로드 팩터가 증가할수록 해시 테이블의 성능은 점점 감소
  - 자바 10의 경우, 값이 0.75를 넘기면 해시 테이블의 공간을 재할당

#### ⍢ 해시 함수

> _**<span style="color:yellow">고유한 인덱스값을 설정</span>**하는 것이 해시 함수의 핵심!_

- 해시 충돌이 발생할 가능성이 적은 함수가 좋은 해시 함수
- 최상의 분포를 제공하는 방법은 데이터에 따라 상이함

**Division Method(나눗셈 방식)**

- 가장 단순하고 널리 쓰이는 정수형 해싱 기법
  ```
  *𝒉(𝒙) = 𝒙 mod 𝒎*
  ```
  - _𝒎_ : 해시 테이블의 크기
  - _𝒙_ : 어떤 간단한 규칙을 통해 만들어낸 충분히 랜덤한 상태의 키의 값

## 충돌 (Collision)

> _서로 다른 키가 같은 해시값을 가지는 현상_

- 충돌이 많아질수록 탐색의 시간 복잡도가 O(1)에서 O(n)으로 증가

**충돌을 처리하는 방법**

1️⃣ **Separate Chaining(개별 체이닝)**

> _같은 인덱스값을 연결리스트로 연결하는 방식_

- 효율성을 위해 맨 앞에 연결리스트 추가
- 각 버킷의 삽입과 삭제가 용이
- 기본적인 자료구조와 임의의 간단한 알고리즘으로 구현 가능
- 저장 가능한 데이터 양에 제약이 적은 편이나, 메모리 이슈 발생 가능

2️⃣ **Open Addressing(오픈 어드레싱)**

> _탐사를 통해 테이블 공간 내의 빈 공간을 찾아나가는 방식_

📍 **Linear Probing(선형 탐사)** _- 가장 간단한 방식_

- 충돌 발생 시, 해당 위치부터 순차적으로 탐사를 진행하는 방식
- 클러스터링 현상 발생

  - 해시 테이블 내에 연속된 데이터 그룹이 생기는 현상
  - 특정 위치에 데이터가 몰리면서 고르게 분포되지 않는 단점
  - 탐사 시간이 오래걸리면서 해싱 효율을 저하시키는 원인이 됨

- 전체 슬롯 개수 이상은 저장할 수 없음
  - 모든 원소가 자신의 해시값과 일치하는 주소에 저장된다는 보장이 없음
  - 기준이 되는 로드 팩터 비율을 넘으면, 그로스 팩터 비율에 따라 더 큰 버킷을 생성하고 새롭게 복사하는 `Rehashing(리해싱)` 작업 발생

⍥ 해시테이블 성능

|      | 평균 | 최악 |
| ---- | ---- | ---- |
| 탐색 | O(1) | O(N) |
| 삽입 | O(1) | O(N) |
| 삭제 | O(1) | O(N) |

## 언어별 해시 테이블 구현 방식

| 언어                           | 방식          |
| ------------------------------ | ------------- |
| 자바, Go, C++                  | 개별 체이닝   |
| 파이썬 (LF=0.66) 루비 (LF=0.5) | 오픈 어드레싱 |

Modern Language의 경우

- 오픈 어드레싱 방식으로 성능 높이고, 대신 로드팩터를 작게 잡아 성능 저하 문제를 해결
  - 추가적인 메모리 할당으로 인한 속도 저하와 오버헤드의 발생을 방지
- 해시 테이블로 구현된 파이썬의 자료형? **딕셔너리**

---

**🥕 Reference**

- **파이썬 알고리즘 인터뷰**
